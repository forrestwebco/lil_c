<script>
  $(function() {
    function red_fade_<%= target.to_s %>() {
      var red_min = 0; // when it should go back up
      var red_max = 255; // when color should go back down
      var change_rate = 0.75; // added/subbed each round
      var change_speed = 1; // interval speed, higher == slower
      var r = Math.round(Math.random() * 255);
      var fat_r = false;

      setInterval(function() {
        var target = $("#<%= target %>");
        // flips color direction of change
        if (r <= red_min) {
          fat_r = false; // fat_r becomes false
        } else if (r >= red_max) {
          fat_r = true; // fat_r becomes true
        }
        // fattens or shrinks red
        if (fat_r) {
          r -= change_rate;
        } else {
          r += change_rate;
        }
        taget.css("background", "rgb(" + r + ", 0, 0)");
      }, change_speed);
    }
    red_fade_<%= target %>();
  });
</script>
